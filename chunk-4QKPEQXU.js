import{a as V}from"./chunk-4NCAY6NN.js";import{d as M}from"./chunk-5EVQ73OQ.js";import{s as D,u as F,v as O,y as P}from"./chunk-EH3J5CVT.js";import{F as I,Fa as m,Hb as A,Ja as k,Jb as N,Kb as L,Mb as T,Oa as d,Ua as l,Va as i,Wa as r,Xa as u,Y as R,Z as C,bb as w,cb as v,db as x,fb as E,hb as o,ib as f,jb as b,m as h,pb as j,v as _,x as S,ya as a,zb as q}from"./chunk-HRRBVR6H.js";import{a as g,b as y}from"./chunk-XXUG4HYI.js";var $=n=>["/p",n];function z(n,t){n&1&&(i(0,"div",9),u(1,"i",10),i(2,"p",11),o(3,"No users or resumes found matching your search."),r(),i(4,"a",12),o(5,"Go Home"),r()())}function B(n,t){if(n&1&&(i(0,"span"),o(1),r()),n&2){let e=x().$implicit;a(),f(e.personalInfo.fullName.charAt(0).toUpperCase())}}function G(n,t){if(n&1){let e=w();i(0,"div",13)(1,"div",14)(2,"div",15),d(3,B,2,1,"span",16),r(),i(4,"h5",17),o(5),r(),i(6,"p",18),o(7),r(),i(8,"p",19),o(9),r(),i(10,"div",20)(11,"a",21),o(12," View Profile "),r(),i(13,"button",22),v("click",function(){let c=R(e).$implicit,p=x();return C(p.onExport(c))}),u(14,"i",23),o(15," Export "),r()()()()}if(n&2){let e=t.$implicit;a(2),E("background-image",e.avatar?"url("+e.avatar+")":""),a(),l("ngIf",!e.avatar),a(2),f(e.personalInfo.fullName),a(2),f(e.title),a(2),b(" ",e.personalInfo.summary||"No summary provided"," "),a(2),l("routerLink",j(7,$,e.id))}}var U=class n{constructor(t,e,s,c,p,H){this.route=t;this.router=e;this.resumeService=s;this.auth=c;this.location=p;this.cd=H}results=[];query="";exportPdf(t){}onExport(t){this.router.navigate(["/p",t.id])}goBack(){this.location.back()}ngOnInit(){this.route.queryParams.pipe(I(t=>(this.query=t.q||"",console.log("Search Query:",this.query),this.query?_({resumes:this.resumeService.searchResumes(this.query),users:this.auth.getAllUsers().pipe(S(()=>h([])))}):h({resumes:[],users:[]})))).subscribe(({resumes:t,users:e})=>{console.log("Search Results:",t),this.query?(this.results=t.map(s=>{let c=e.find(p=>p.id===s.userId);return y(g({},s),{avatar:c?.avatar})}),this.cd.detectChanges()):this.results=[]},t=>{console.error("Search Error:",t)})}static \u0275fac=function(e){return new(e||n)(m(D),m(F),m(V),m(P),m(A),m(q))};static \u0275cmp=k({type:n,selectors:[["app-search-results"]],decls:10,vars:3,consts:[[1,"container","mt-5","mb-5","animate__animated","animate__fadeIn"],[1,"d-flex","align-items-center","mb-4"],[1,"btn","btn-primary","rounded-circle","btn-sm","me-3","shadow-sm",2,"width","40px","height","40px","display","flex","align-items","center","justify-content","center",3,"click"],[1,"bi","bi-arrow-left","fs-5"],[1,"fw-bold","mb-0"],[1,"bi","bi-search","me-2","text-primary"],["class","text-center py-5 glass-card",4,"ngIf"],[1,"row"],["class","col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"text-center","py-5","glass-card"],[1,"bi","bi-emoji-frown","display-1","text-muted","opacity-25"],[1,"mt-3","text-muted"],["routerLink","/",1,"btn","btn-outline-primary","mt-2"],[1,"col-md-6","col-lg-4","mb-4"],[1,"glass-card","h-100","p-4","d-flex","flex-column","align-items-center","text-center","animate__animated","animate__fadeInUp"],[1,"rounded-circle","bg-secondary","text-white","d-flex","justify-content-center","align-items-center","mb-3","shadow-sm",2,"width","80px","height","80px","font-size","2rem","background-size","cover","background-position","center"],[4,"ngIf"],[1,"fw-bold","mb-1"],[1,"text-primary","small","mb-3"],[1,"text-muted","small","mb-4","text-truncate",2,"max-width","100%"],[1,"mt-auto"],[1,"btn","btn-primary","rounded-pill","px-4","btn-sm","me-2",3,"routerLink"],[1,"btn","btn-outline-secondary","rounded-pill","px-3","btn-sm",3,"click"],[1,"bi","bi-file-earmark-pdf"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return s.goBack()}),u(3,"i",3),r(),i(4,"h3",4),u(5,"i",5),o(6),r()(),d(7,z,6,0,"div",6),i(8,"div",7),d(9,G,16,9,"div",8),r()()),e&2&&(a(6),b(' Search Results for "',s.query,'" '),a(),l("ngIf",s.results.length===0),a(2),l("ngForOf",s.results))},dependencies:[T,N,L,O,M],encapsulation:2})};export{U as SearchResultsComponent};
