import{s as k}from"./chunk-NUPZK4QK.js";import{d as I}from"./chunk-5EVQ73OQ.js";import{y as M}from"./chunk-EH3J5CVT.js";import{Fa as f,Ib as w,Ja as v,Jb as A,Kb as C,Mb as E,Oa as h,Ua as o,Va as t,Wa as i,Xa as _,Y as u,Z as g,bb as U,cb as x,db as d,fb as y,gb as S,hb as s,ib as c,jb as b,ya as n}from"./chunk-HRRBVR6H.js";import"./chunk-XXUG4HYI.js";function O(l,a){if(l&1&&(t(0,"span"),s(1),i()),l&2){let r=d().$implicit;n(),c(r.name.charAt(0).toUpperCase())}}function T(l,a){if(l&1){let r=U();t(0,"tr")(1,"td",14)(2,"div",15)(3,"div",16),h(4,O,2,1,"span",17),i(),t(5,"div",18)(6,"div",19),s(7),i(),t(8,"small",20),s(9),i()()()(),t(10,"td")(11,"span",21),s(12),i()(),t(13,"td")(14,"div",22)(15,"input",23),x("change",function(){let m=u(r).$implicit,p=d();return g(p.toggleStatus(m))}),i(),t(16,"label",24),s(17),i()()(),t(18,"td",25)(19,"button",26),x("click",function(){let m=u(r).$implicit,p=d();return g(p.deleteUser(m))}),_(20,"i",27),i()()()}if(l&2){let r,e=a.$implicit,m=d();n(3),y("background-image",e.avatar?"url("+e.avatar+")":""),n(),o("ngIf",!e.avatar),n(2),o("title",e.name),n(),c(e.name),n(),o("title",e.email),n(),c(e.email),n(2),o("ngClass",e.role==="admin"?"bg-warning text-dark":"bg-info bg-opacity-10 text-info"),n(),c(e.role),n(3),o("checked",e.isActive)("disabled",e.email===((r=m.auth.currentUser())==null?null:r.email)),n(),S("text-success",e.isActive)("text-danger",!e.isActive),n(),b(" ",e.isActive?"Active":"Disabled"," "),n(2),o("disabled",e.role==="admin")}}var F=class l{constructor(a){this.auth=a}users=[];ngOnInit(){this.loadUsers()}loadUsers(){this.auth.getAllUsers().subscribe(a=>this.users=a)}toggleStatus(a){if(a.email===this.auth.currentUser()?.email)return;let r=!a.isActive;this.auth.updateUserStatus(a.id,r),a.isActive=r}deleteUser(a){confirm(`Are you sure you want to delete ${a.name}?`)&&(this.auth.deleteUser(a.id),this.loadUsers())}static \u0275fac=function(r){return new(r||l)(f(M))};static \u0275cmp=v({type:l,selectors:[["app-admin-manage-users"]],decls:24,vars:2,consts:[[1,"container","my-5"],[1,"mb-4","fw-bold","text-primary"],[1,"card","shadow-sm","border-0"],[1,"card-header","bg-white","py-3","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"badge","bg-primary","rounded-pill"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","align-middle","mb-0"],[1,"bg-light"],[1,"ps-4",2,"width","40%"],[2,"width","20%"],[1,"text-end","pe-4",2,"width","20%"],[4,"ngFor","ngForOf"],[1,"ps-4"],[1,"d-flex","align-items-center"],[1,"rounded-circle","bg-secondary","text-white","d-flex","justify-content-center","align-items-center","me-3","flex-shrink-0",2,"width","40px","height","40px","background-size","cover","background-position","center"],[4,"ngIf"],[1,"text-truncate",2,"max-width","200px"],[1,"fw-bold","text-truncate",3,"title"],[1,"text-muted","d-block","text-truncate",3,"title"],[1,"badge",3,"ngClass"],[1,"form-check","form-switch",2,"min-width","100px"],["type","checkbox",1,"form-check-input",3,"change","checked","disabled"],[1,"form-check-label","small"],[1,"text-end","pe-4"],[1,"btn","btn-sm","btn-outline-danger",3,"click","disabled"],[1,"bi","bi-trash"]],template:function(r,e){r&1&&(t(0,"div",0)(1,"h2",1),s(2,"Admin Control Panel"),i(),t(3,"div",2)(4,"div",3)(5,"h5",4),s(6,"User Management"),i(),t(7,"span",5),s(8),i()(),t(9,"div",6)(10,"div",7)(11,"table",8)(12,"thead",9)(13,"tr")(14,"th",10),s(15,"User"),i(),t(16,"th",11),s(17,"Role"),i(),t(18,"th",11),s(19,"Status"),i(),t(20,"th",12),s(21,"Actions"),i()()(),t(22,"tbody"),h(23,T,21,17,"tr",13),i()()()()()()),r&2&&(n(8),b("",e.users.length," Users"),n(15),o("ngForOf",e.users))},dependencies:[E,w,A,C,I,k],encapsulation:2})};export{F as AdminManageUsersComponent};
